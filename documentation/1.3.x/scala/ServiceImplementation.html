


<!DOCTYPE html>
<html class="noios">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Lagom - Implementing services</title>
        <meta name="description" content="Lagom">
        
        <meta name="viewport" content="width=device-width,maximum-scale=1"/>
        <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700" rel="stylesheet" type="text/css"/>
        <link rel="stylesheet" href="/28567f17f7db00430eb0f3f4380c7c53e10abdde-all-styles-concat.css" type="text/css">
         
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" />
    

    </head>
    <body>
        <div class="off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>
                <div class="off-canvas position-left" id="offCanvasLeft" data-off-canvas >
                    <nav>
                        <button class="close-button" aria-label="Close menu" type="button" data-close>
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <a href="/download.html">Download</a>
                        

<h3>Documentation</h3>
<ul>
    <li><a href="/documentation/1.2.x/java/Installation.html">Installing</a></li>
    <li><a href="/documentation/1.2.x/java/GettingStarted.html">Getting started</a></li>
    <li><a href="/documentation/">Full documentation</a></li>
    <li><a href="/blog">Blog</a></li>
</ul>
<h3>Find help</h3>
<ul>
    <li><a href="https://gitter.im/lagom/lagom">Gitter channel</a></li>
    <li><a href="https://stackoverflow.com/questions/tagged/lagom">Stack overflow</a></li>
    <li><a href="https://www.lightbend.com/services/expert-support">Professional support</a></li>
</ul>
<h3>Contribute</h3>
<ul>
    <li><a href="/get-involved.html">Get involved</a></li>
    <li><a href="/conduct.html">Code of conduct</a></li>
    <li><a href="/community-process.html">Community process</a></li>
    <li><a href="/contributing.html">Contributor guidelines</a></li>
</ul>
<h3>Programs</h3>
<ul>
    <li><a href="/outreachy/round14.html">Outreachy</a></li>
</ul>

                    </nav>
                </div>
                <div class="off-canvas-content" data-off-canvas-content>
                    <header class="navbar show-for-medium">
                        <div class="row">
                            <div class="small-12 columns">
                                <button class="menu-icon hide-for-medium" type="button" data-open="offCanvasLeft" data-toggle="offCanvas"></button>
                                <a class="logo" href="/"><svg id="Lagom_Full_Color" class="svg-logo svg-logo-lagom-full-color" data-name="Lagom Full Color" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 752 192"><title>logom</title><g id="Lagom"><path d="M291.58,31.79h19.83v87.91c0,8.1,2.64,11.57,9.91,11.57a21.11,21.11,0,0,0,5.95-.66V148.3a35.63,35.63,0,0,1-9.42,1c-17.52,0-26.28-8.92-26.28-26.94V31.79Z" fill="#652b7c"/><path d="M398.34,75.75V63.69h19.83v58.17c0,7.11,1.65,9.75,6.11,9.75a41.28,41.28,0,0,0,4.13-.33v16a28.65,28.65,0,0,1-9.75,1.32c-4.79,0-8.59-.83-11.57-2.64a15.33,15.33,0,0,1-6.78-10.08C394.53,144.66,385,149,371.73,149A39.58,39.58,0,0,1,342,136.4c-7.93-8.43-11.9-18.67-11.9-31.07s4-22.64,11.9-30.9a39.58,39.58,0,0,1,29.75-12.56C385.12,61.87,395.2,67.82,398.34,75.75Zm-5.95,47.76a24.29,24.29,0,0,0,7.44-18.18,24.29,24.29,0,0,0-7.44-18.18,24.68,24.68,0,0,0-18-7.27,23.93,23.93,0,0,0-17.68,7.27c-4.63,4.79-6.94,10.91-6.94,18.18s2.31,13.39,6.94,18.18a23.93,23.93,0,0,0,17.68,7.27A24.68,24.68,0,0,0,392.39,123.51Z" fill="#652b7c"/><path d="M495.67,63.69H515.5v69.41c0,20-2.81,32.23-14,41-7.93,6.11-17.68,9.25-29.42,9.25-15.53,0-28.92-4-40.32-12.06l9.59-14.71a50.47,50.47,0,0,0,28.59,9.09q11.65,0,18.34-5c5.29-3.8,7.93-10.91,7.93-21.15v-4.13c-4,7.11-13.88,12.23-27.1,12.23a40.53,40.53,0,0,1-29.75-12.23c-7.93-8.1-11.9-18.34-11.9-30.41s4-22.31,12.06-30.57a39.23,39.23,0,0,1,29.58-12.56c13.72,0,23.8,5.78,26.61,13.88V63.69ZM489.72,123a24.19,24.19,0,0,0,7.44-18,23.82,23.82,0,0,0-7.44-17.85,24.68,24.68,0,0,0-18-7.27A23.93,23.93,0,0,0,454,87.15,24.69,24.69,0,0,0,447.09,105,25.08,25.08,0,0,0,454,123a23.79,23.79,0,0,0,17.68,7.11C478.81,130.12,484.93,127.81,489.72,123Z" fill="#652b7c"/><path d="M522.44,105.33a42.05,42.05,0,0,1,13.22-31.4c8.76-8.43,19.5-12.72,32.22-12.72s23.47,4.3,32.23,12.72a42.05,42.05,0,0,1,13.22,31.4,42.05,42.05,0,0,1-13.22,31.4c-8.76,8.43-19.5,12.72-32.23,12.72s-23.47-4.3-32.22-12.72A42.05,42.05,0,0,1,522.44,105.33ZM586.23,124a25.67,25.67,0,0,0,7.44-18.67,25,25,0,0,0-7.44-18.51,26.13,26.13,0,0,0-36.85,0,25.56,25.56,0,0,0-7.27,18.51A26.22,26.22,0,0,0,549.38,124,26.54,26.54,0,0,0,586.23,124Z" fill="#652b7c"/><path d="M620.6,147V63.69h19.67v11.9C643.74,67.49,652,62,662.58,62,674,62,681.91,66.83,686,76.58,690.84,66.83,699.76,62,712.81,62c18,0,28.42,12.72,28.42,33.38v26.28c0,6.44,1.16,8.76,5.62,8.76a14.56,14.56,0,0,0,2.81-.33v16.69a28.37,28.37,0,0,1-8.59,1c-13.05,0-19.5-7.27-19.5-21.81V98.23c0-11.4-5.29-18.51-14.54-18.51s-16,8.1-16,19.33V147H671.34V98.23c0-11.4-5.45-18.51-14.87-18.51-9.25,0-16.2,8.1-16.2,19.33V147H620.6Z" fill="#652b7c"/></g><g id="Icon"><path d="M261,84l-70,34,70,34S260.78,84.27,261,84Z" fill="#652b7c"/><polygon points="121 152 191 118 121 84 121 152" fill="#652b7c"/><path d="M191,118l70,34c-0.27,0-41.76,25-60.63,36.24a17.64,17.64,0,0,1-18,0C163.47,177,121,152,121,152Z" fill="#421540"/><path d="M200.23,47.65C219.09,58.88,261,84,261,84l-70,34L121,84c0.27,0,42.31-25.12,61.18-36.36A17.64,17.64,0,0,1,200.23,47.65Z" fill="#bf97c6"/><path d="M145,20.58l-35,17,35,17S144.89,20.72,145,20.58Z" fill="#652b7c"/><polygon points="75 54.58 110 37.58 75 20.58 75 54.58" fill="#652b7c"/><path d="M110,37.58l35,17c-0.14,0-20.88,12.5-30.31,18.12a8.82,8.82,0,0,1-9,0C96.23,67.08,75,54.58,75,54.58Z" fill="#421540"/><path d="M114.61,2.4C124,8,145,20.58,145,20.58l-35,17-35-17C75.14,20.59,96.16,8,105.59,2.4A8.82,8.82,0,0,1,114.61,2.4Z" fill="#bf97c6"/><path d="M101,91L51,115.54l50,24.53S100.84,91.21,101,91Z" fill="#652b7c"/><polygon points="1 140.07 51 115.54 1 91.02 1 140.07" fill="#652b7c"/><path d="M51,115.54l50,24.53c-0.19,0-29.83,18-43.3,26.14a12.5,12.5,0,0,1-12.89,0C31.34,158.1,1,140.07,1,140.07Z" fill="#421540"/><path d="M57.59,64.79C71.06,72.9,101,91,101,91L51,115.54,1,91C1.19,91,31.22,72.9,44.7,64.79A12.5,12.5,0,0,1,57.59,64.79Z" fill="#bf97c6"/></g></svg></a>
                                <nav class="sections show-for-medium">
                                    

<a href="/download.html">Download</a>
<a href="/documentation/">Documentation</a>
<a href="/get-involved.html">Get Involved</a>
<a href="/blog/">Blog</a>

                                </nav>
                            </div>
                        </div>
                    </header>
                    <div class="fw-wrapper flush social-bar">
                        <div class="row hide-for-medium">
                            <div class="small-12 columns">
                                <button class="menu-icon" type="button" data-open="offCanvasLeft" data-toggle="offCanvas"></button>
                                <a class="logo-for-small" href="/"><svg id="Lagom_Reverse" class="svg-logo svg-logo-lagom-reverse" data-name="Lagom Reverse" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 752 192"><title>logom</title><g id="Lagom"><path d="M291.58,31.79h19.83v87.91c0,8.1,2.64,11.57,9.91,11.57a21.11,21.11,0,0,0,5.95-.66V148.3a35.63,35.63,0,0,1-9.42,1c-17.52,0-26.28-8.92-26.28-26.94V31.79Z" fill="#fff"/><path d="M398.34,75.75V63.69h19.83v58.17c0,7.11,1.65,9.75,6.11,9.75a41.28,41.28,0,0,0,4.13-.33v16a28.65,28.65,0,0,1-9.75,1.32c-4.79,0-8.59-.83-11.57-2.64a15.33,15.33,0,0,1-6.78-10.08C394.53,144.66,385,149,371.73,149A39.58,39.58,0,0,1,342,136.4c-7.93-8.43-11.9-18.67-11.9-31.07s4-22.64,11.9-30.9a39.58,39.58,0,0,1,29.75-12.56C385.12,61.87,395.2,67.82,398.34,75.75Zm-5.95,47.76a24.29,24.29,0,0,0,7.44-18.18,24.29,24.29,0,0,0-7.44-18.18,24.68,24.68,0,0,0-18-7.27,23.93,23.93,0,0,0-17.68,7.27c-4.63,4.79-6.94,10.91-6.94,18.18s2.31,13.39,6.94,18.18a23.93,23.93,0,0,0,17.68,7.27A24.68,24.68,0,0,0,392.39,123.51Z" fill="#fff"/><path d="M495.67,63.69H515.5v69.41c0,20-2.81,32.23-14,41-7.93,6.11-17.68,9.25-29.42,9.25-15.53,0-28.92-4-40.32-12.06l9.59-14.71a50.47,50.47,0,0,0,28.59,9.09q11.65,0,18.34-5c5.29-3.8,7.93-10.91,7.93-21.15v-4.13c-4,7.11-13.88,12.23-27.1,12.23a40.53,40.53,0,0,1-29.75-12.23c-7.93-8.1-11.9-18.34-11.9-30.41s4-22.31,12.06-30.57a39.23,39.23,0,0,1,29.58-12.56c13.72,0,23.8,5.78,26.61,13.88V63.69ZM489.72,123a24.19,24.19,0,0,0,7.44-18,23.82,23.82,0,0,0-7.44-17.85,24.68,24.68,0,0,0-18-7.27A23.93,23.93,0,0,0,454,87.15,24.69,24.69,0,0,0,447.09,105,25.08,25.08,0,0,0,454,123a23.79,23.79,0,0,0,17.68,7.11C478.81,130.12,484.93,127.81,489.72,123Z" fill="#fff"/><path d="M522.44,105.33a42.05,42.05,0,0,1,13.22-31.4c8.76-8.43,19.5-12.72,32.22-12.72s23.47,4.3,32.23,12.72a42.05,42.05,0,0,1,13.22,31.4,42.05,42.05,0,0,1-13.22,31.4c-8.76,8.43-19.5,12.72-32.23,12.72s-23.47-4.3-32.22-12.72A42.05,42.05,0,0,1,522.44,105.33ZM586.23,124a25.67,25.67,0,0,0,7.44-18.67,25,25,0,0,0-7.44-18.51,26.13,26.13,0,0,0-36.85,0,25.56,25.56,0,0,0-7.27,18.51A26.22,26.22,0,0,0,549.38,124,26.54,26.54,0,0,0,586.23,124Z" fill="#fff"/><path d="M620.6,147V63.69h19.67v11.9C643.74,67.49,652,62,662.58,62,674,62,681.91,66.83,686,76.58,690.84,66.83,699.76,62,712.81,62c18,0,28.42,12.72,28.42,33.38v26.28c0,6.44,1.16,8.76,5.62,8.76a14.56,14.56,0,0,0,2.81-.33v16.69a28.37,28.37,0,0,1-8.59,1c-13.05,0-19.5-7.27-19.5-21.81V98.23c0-11.4-5.29-18.51-14.54-18.51s-16,8.1-16,19.33V147H671.34V98.23c0-11.4-5.45-18.51-14.87-18.51-9.25,0-16.2,8.1-16.2,19.33V147H620.6Z" fill="#fff"/></g><g id="Icon"><g opacity="0.8"><path d="M261,84l-70,34,70,34S260.78,84.27,261,84Z" fill="#fff"/></g><g opacity="0.8"><polygon points="121 152 191 118 121 84 121 152" fill="#fff"/></g><path d="M191,118l70,34c-0.27,0-41.76,25-60.63,36.24a17.64,17.64,0,0,1-18,0C163.47,177,121,152,121,152Z" fill="#fff" opacity="0.6"/><path d="M200.23,47.65C219.09,58.88,261,84,261,84l-70,34L121,84c0.27,0,42.31-25.12,61.18-36.36A17.64,17.64,0,0,1,200.23,47.65Z" fill="#fff"/><g opacity="0.8"><path d="M145,20.58l-35,17,35,17S144.89,20.72,145,20.58Z" fill="#fff"/></g><g opacity="0.8"><polygon points="75 54.58 110 37.58 75 20.58 75 54.58" fill="#fff"/></g><path d="M110,37.58l35,17c-0.14,0-20.88,12.5-30.31,18.12a8.82,8.82,0,0,1-9,0C96.23,67.08,75,54.58,75,54.58Z" fill="#fff" opacity="0.6"/><path d="M114.61,2.4C124,8,145,20.58,145,20.58l-35,17-35-17C75.14,20.59,96.16,8,105.59,2.4A8.82,8.82,0,0,1,114.61,2.4Z" fill="#fff"/><g opacity="0.8"><path d="M101,91L51,115.54l50,24.53S100.84,91.21,101,91Z" fill="#fff"/></g><g opacity="0.8"><polygon points="1 140.07 51 115.54 1 91.02 1 140.07" fill="#fff"/></g><path d="M51,115.54l50,24.53c-0.19,0-29.83,18-43.3,26.14a12.5,12.5,0,0,1-12.89,0C31.34,158.1,1,140.07,1,140.07Z" fill="#fff" opacity="0.6"/><path d="M57.59,64.79C71.06,72.9,101,91,101,91L51,115.54,1,91C1.19,91,31.22,72.9,44.7,64.79A12.5,12.5,0,0,1,57.59,64.79Z" fill="#fff"/></g></svg></a>
                            </div>
                        </div>
                        <div class="row show-for-medium">
                            <div class="small-12 columns">
                                <!-- social icons -->
                                <a class="logo" href="/"><svg id="Lagom_Reverse" class="svg-logo svg-logo-lagom-reverse" data-name="Lagom Reverse" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 752 192"><title>logom</title><g id="Lagom"><path d="M291.58,31.79h19.83v87.91c0,8.1,2.64,11.57,9.91,11.57a21.11,21.11,0,0,0,5.95-.66V148.3a35.63,35.63,0,0,1-9.42,1c-17.52,0-26.28-8.92-26.28-26.94V31.79Z" fill="#fff"/><path d="M398.34,75.75V63.69h19.83v58.17c0,7.11,1.65,9.75,6.11,9.75a41.28,41.28,0,0,0,4.13-.33v16a28.65,28.65,0,0,1-9.75,1.32c-4.79,0-8.59-.83-11.57-2.64a15.33,15.33,0,0,1-6.78-10.08C394.53,144.66,385,149,371.73,149A39.58,39.58,0,0,1,342,136.4c-7.93-8.43-11.9-18.67-11.9-31.07s4-22.64,11.9-30.9a39.58,39.58,0,0,1,29.75-12.56C385.12,61.87,395.2,67.82,398.34,75.75Zm-5.95,47.76a24.29,24.29,0,0,0,7.44-18.18,24.29,24.29,0,0,0-7.44-18.18,24.68,24.68,0,0,0-18-7.27,23.93,23.93,0,0,0-17.68,7.27c-4.63,4.79-6.94,10.91-6.94,18.18s2.31,13.39,6.94,18.18a23.93,23.93,0,0,0,17.68,7.27A24.68,24.68,0,0,0,392.39,123.51Z" fill="#fff"/><path d="M495.67,63.69H515.5v69.41c0,20-2.81,32.23-14,41-7.93,6.11-17.68,9.25-29.42,9.25-15.53,0-28.92-4-40.32-12.06l9.59-14.71a50.47,50.47,0,0,0,28.59,9.09q11.65,0,18.34-5c5.29-3.8,7.93-10.91,7.93-21.15v-4.13c-4,7.11-13.88,12.23-27.1,12.23a40.53,40.53,0,0,1-29.75-12.23c-7.93-8.1-11.9-18.34-11.9-30.41s4-22.31,12.06-30.57a39.23,39.23,0,0,1,29.58-12.56c13.72,0,23.8,5.78,26.61,13.88V63.69ZM489.72,123a24.19,24.19,0,0,0,7.44-18,23.82,23.82,0,0,0-7.44-17.85,24.68,24.68,0,0,0-18-7.27A23.93,23.93,0,0,0,454,87.15,24.69,24.69,0,0,0,447.09,105,25.08,25.08,0,0,0,454,123a23.79,23.79,0,0,0,17.68,7.11C478.81,130.12,484.93,127.81,489.72,123Z" fill="#fff"/><path d="M522.44,105.33a42.05,42.05,0,0,1,13.22-31.4c8.76-8.43,19.5-12.72,32.22-12.72s23.47,4.3,32.23,12.72a42.05,42.05,0,0,1,13.22,31.4,42.05,42.05,0,0,1-13.22,31.4c-8.76,8.43-19.5,12.72-32.23,12.72s-23.47-4.3-32.22-12.72A42.05,42.05,0,0,1,522.44,105.33ZM586.23,124a25.67,25.67,0,0,0,7.44-18.67,25,25,0,0,0-7.44-18.51,26.13,26.13,0,0,0-36.85,0,25.56,25.56,0,0,0-7.27,18.51A26.22,26.22,0,0,0,549.38,124,26.54,26.54,0,0,0,586.23,124Z" fill="#fff"/><path d="M620.6,147V63.69h19.67v11.9C643.74,67.49,652,62,662.58,62,674,62,681.91,66.83,686,76.58,690.84,66.83,699.76,62,712.81,62c18,0,28.42,12.72,28.42,33.38v26.28c0,6.44,1.16,8.76,5.62,8.76a14.56,14.56,0,0,0,2.81-.33v16.69a28.37,28.37,0,0,1-8.59,1c-13.05,0-19.5-7.27-19.5-21.81V98.23c0-11.4-5.29-18.51-14.54-18.51s-16,8.1-16,19.33V147H671.34V98.23c0-11.4-5.45-18.51-14.87-18.51-9.25,0-16.2,8.1-16.2,19.33V147H620.6Z" fill="#fff"/></g><g id="Icon"><g opacity="0.8"><path d="M261,84l-70,34,70,34S260.78,84.27,261,84Z" fill="#fff"/></g><g opacity="0.8"><polygon points="121 152 191 118 121 84 121 152" fill="#fff"/></g><path d="M191,118l70,34c-0.27,0-41.76,25-60.63,36.24a17.64,17.64,0,0,1-18,0C163.47,177,121,152,121,152Z" fill="#fff" opacity="0.6"/><path d="M200.23,47.65C219.09,58.88,261,84,261,84l-70,34L121,84c0.27,0,42.31-25.12,61.18-36.36A17.64,17.64,0,0,1,200.23,47.65Z" fill="#fff"/><g opacity="0.8"><path d="M145,20.58l-35,17,35,17S144.89,20.72,145,20.58Z" fill="#fff"/></g><g opacity="0.8"><polygon points="75 54.58 110 37.58 75 20.58 75 54.58" fill="#fff"/></g><path d="M110,37.58l35,17c-0.14,0-20.88,12.5-30.31,18.12a8.82,8.82,0,0,1-9,0C96.23,67.08,75,54.58,75,54.58Z" fill="#fff" opacity="0.6"/><path d="M114.61,2.4C124,8,145,20.58,145,20.58l-35,17-35-17C75.14,20.59,96.16,8,105.59,2.4A8.82,8.82,0,0,1,114.61,2.4Z" fill="#fff"/><g opacity="0.8"><path d="M101,91L51,115.54l50,24.53S100.84,91.21,101,91Z" fill="#fff"/></g><g opacity="0.8"><polygon points="1 140.07 51 115.54 1 91.02 1 140.07" fill="#fff"/></g><path d="M51,115.54l50,24.53c-0.19,0-29.83,18-43.3,26.14a12.5,12.5,0,0,1-12.89,0C31.34,158.1,1,140.07,1,140.07Z" fill="#fff" opacity="0.6"/><path d="M57.59,64.79C71.06,72.9,101,91,101,91L51,115.54,1,91C1.19,91,31.22,72.9,44.7,64.79A12.5,12.5,0,0,1,57.59,64.79Z" fill="#fff"/></g></svg></a>
                                <nav class="social">
                                    <a href="//groups.google.com/forum/#!forum/lagom-framework"><span>Mailing list</span></a>
                                    <a href="//twitter.com/lagom"><span>Twitter</span></a>
                                    <a href="//github.com/lagom/lagom"><span>Github</span></a>
                                    <a href="//stackoverflow.com/questions/tagged/lagom"><span>Stackoverflow</span></a>
                                </nav>
                                <nav class="sections-scroll">
                                    

<a href="/download.html">Download</a>
<a href="/documentation/">Documentation</a>
<a href="/get-involved.html">Get Involved</a>
<a href="/blog/">Blog</a>

                                </nav>
                            </div>
                        </div>
                    </div>

                      
    <header class="fw-wrapper lgm-purple page-title">
        <div class="row">
            <div class="small-12 columns">
                <h1>Implementing services</h1>
            </div>
        </div>
    </header>

    <div class="fw-wrapper documentation-content">
        <div class="row">
            <div class="small-12 large-7 columns">
                
                    <nav class="breadcrumbs">
                        <a href="Home.html">Scala Home</a>
                        
                            &raquo; <a href="ReferenceGuide.html">Lagom reference guide</a>
                        
                            &raquo; <a href="ServiceDescriptors.html">Writing Lagom services</a>
                        
                    </nav>
                

                <article>
                <h1 id="Implementing-services"><a class="section-marker" href="#Implementing-services">§</a>Implementing services</h1>
<p>Services are implemented by providing an implementation of the service descriptor trait, implementing each call specified by that descriptor.</p>
<p>For example, here&rsquo;s an implementation of the <code>HelloService</code> descriptor:</p>
<pre class="prettyprint"><code class="language-scala">import com.lightbend.lagom.scaladsl.api.ServiceCall
import scala.concurrent.Future

class HelloServiceImpl extends HelloService {
  override def sayHello = ServiceCall { name =&gt;
    Future.successful(s&quot;Hello $name!&quot;)
  }
}</code></pre>
<p>As you can see, the <code>sayHello</code> method is implemented using the <code>apply</code> factory method on <a href="api/com/lightbend/lagom/scaladsl/api/ServiceCall$.html"><code>ServiceCall</code></a>. This takes a function of <code>Request =&gt; Future[Response]</code> and returns a <a href="api/com/lightbend/lagom/scaladsl/api/ServiceCall.html"><code>ServiceCall</code></a> whose <code>invoke</code> method simply delegates to that function. An important thing to realise here is that the invocation of <code>sayHello</code> itself does not execute the call, it only returns the service call to be executed. The advantage here is that when it comes to composing the call with other cross cutting concerns, such as authentication, this can easily be done using ordinary function based composition.</p>
<p>Let&rsquo;s have a look at our <a href="api/com/lightbend/lagom/scaladsl/api/ServiceCall.html"><code>ServiceCall</code></a> interface again:</p>
<pre class="prettyprint"><code class="language-scala">trait ServiceCall[Request, Response] {
  def invoke(request: Request): Future[Response]
}</code></pre>
<p>It will take the request, and return the response as a <a href="http://www.scala-lang.org/api/2.12.x/scala/concurrent/Future.html"><code>Future</code></a>. If you&rsquo;ve never seen <code>Future</code> before, it is a value that may not be available until later. When an API returns a future, that value might not yet be computed, but the API promises that at some point in future, it will be. Since the value isn&rsquo;t computed yet, you can&rsquo;t interact with it immediately. What you can do though is attach callbacks that transform the promise to a promise of a new value, using the <code>map</code> and <code>flatMap</code> methods. <code>Future</code> with its <code>map</code> and <code>flatMap</code> methods are fundamental building blocks for doing reactive programming in Scala, they allow your code to be asynchronous, not waiting for things to happen, but attaching callbacks that react to computations being completed.</p>
<p>Of course, a simple hello world computation is not asynchronous, all it needs to do is build a String, and that returns immediately. In this case, we need to wrap the result of that in a <code>Future</code>. This can be done by calling <code>Future.successful()</code>, which returns a future that has an immediately available value.</p><h2 id="Wiring-together-a-Lagom-application"><a class="section-marker" href="#Wiring-together-a-Lagom-application">§</a>Wiring together a Lagom application</h2>
<p>Having provided an implementation of the service, we can now register that with the Lagom framework. Lagoms Scala API is built on top of Play Framework, and uses Play&rsquo;s <a href="https://www.playframework.com/documentation/2.5.x/ScalaCompileTimeDependencyInjection">compile time dependency injection support</a> to wire together a Lagom application.</p>
<p>Although it&rsquo;s not strictly necessary, we recommend that you use <a href="https://github.com/adamw/macwire">Macwire</a> to assist in wiring dependencies together. Macwire provides some very lightweight macros that locate dependencies for the components you wish to create so that you don&rsquo;t have to manually wire them together yourself. Macwire can be added to your service by adding the following to your service implementations dependencies:</p>
<pre class="prettyprint"><code class="language-sbt">libraryDependencies += &quot;com.softwaremill.macwire&quot; %% &quot;macros&quot; % &quot;2.2.5&quot; % &quot;provided&quot;</code></pre>
<p>Next we need to create an application cake. The simplest way of doing this is by creating an abstract class that extends <a href="api/com/lightbend/lagom/scaladsl/server/LagomApplication.html"><code>LagomApplication</code></a>:</p>
<pre class="prettyprint"><code class="language-scala">import com.lightbend.lagom.scaladsl.server._
import play.api.libs.ws.ahc.AhcWSComponents
import com.softwaremill.macwire._

abstract class HelloApplication(context: LagomApplicationContext)
  extends LagomApplication(context)
    with AhcWSComponents {

  override lazy val lagomServer = LagomServer.forServices(
    bindService[HelloService].to(wire[HelloServiceImpl])
  )
}</code></pre>
<p>The important method to implement here is the <code>lagomServer</code> method. Lagom will use this to discover your service bindings and create a Play router for handling your service calls. You can see that we&rsquo;ve bound one service descriptor, the <code>HelloService</code>, to our <code>HelloServiceImpl</code> implementation. <code>LagomServer.forServices()</code> takes an variable number of arguments so you can build a server with many <code>Service</code>s in it (this is often useful to include admin or metrics services with your primary service). When you create a server with many services the first parameter in <code>LagomServer.forServices()</code> will be considered the <code>primary service</code> and Lagom will use it&rsquo;s name as the server name. So if you create a server with the services <code>Orders</code>, <code>Metrics</code> and <code>FraudDetection</code> then your server will be named <code>Orders</code> as that is the primary service.</p>
<p>We&rsquo;ve used Macwire&rsquo;s <code>wire</code> macro to wire the dependencies - at the moment our service actually has no dependencies so we could just construct it manually ourselves, but it&rsquo;s not likely that a real service implementation would have no dependencies.</p>
<p>You can see that we&rsquo;ve also mixed in the Play <code>AhcWSComponents</code> trait. Play&rsquo;s HTTP client, the WS API, which is used by Lagom for making service calls, is pluggable, and so an implementation needs to be selected when we wire our application together. We&rsquo;ve selected Play&rsquo;s async-http-client implementation, provided by <code>AhcWSComponents</code>.</p>
<p>The <code>HelloApplication</code> is an abstract class, the reason for this is that there is still one method that hasn&rsquo;t been implemented, the <code>serviceLocator</code> method. A typical application will use different service locators in different environments, in development, it will use the service locator provided by the Lagom development environment, while in production it will use whatever is appropriate for your production environment, such as the <code>ConductR</code> service locator implementation. So our main application cake leaves this method abstract so that it can mix in the right one depending on which mode it is in when the application gets loaded.</p>
<p>Having created our application cake, we can now write an application loader. Play&rsquo;s mechanism for loading an application is for the application to provide an application loader. Play will pass some context information to this loader, such as a classloader, the running mode, and any extra configuration, so that the application can bootstrap itself. Lagom provides a convenient mechanism for implementing this, the <a href="api/com/lightbend/lagom/scaladsl/server/LagomApplicationLoader.html"><code>LagomApplicationLoader</code></a>:</p>
<pre class="prettyprint"><code class="language-scala">import com.lightbend.lagom.scaladsl.server._
import com.lightbend.lagom.scaladsl.api.ServiceLocator
import com.lightbend.lagom.scaladsl.devmode.LagomDevModeComponents

class HelloApplicationLoader extends LagomApplicationLoader {

  override def loadDevMode(context: LagomApplicationContext) =
    new HelloApplication(context) with LagomDevModeComponents

  override def load(context: LagomApplicationContext) =
    new HelloApplication(context) {
      override def serviceLocator = ServiceLocator.NoServiceLocator
    }

  override def describeServices = List(
    readDescriptor[HelloService]
  )
}</code></pre>
<p>The loader has two methods that must be implemented, <code>load</code> and <code>loadDevMode</code>. You can see that we&rsquo;ve mixed in different service locators for each method, we&rsquo;ve mixed in <a href="api/com/lightbend/lagom/scaladsl/devmode/LagomDevModeComponents.html"><code>LagomDevModeComponents</code></a> that provides the dev mode service locator and registers the services with it in dev mode, and in prod mode, for now, we&rsquo;ve simply provided <a href="api/com/lightbend/lagom/scaladsl/api/ServiceLocator$$NoServiceLocator$.html"><code>NoServiceLocator</code></a> as the service locator - this is a service locator that will return nothing for every lookup. We&rsquo;ll see in the <a href="ProductionOverview.html">deploying to production</a> documentation how to select the right service locator for production.</p>
<p>A third method, <code>describeServices</code>, is optional, but may be used by tooling, for example by <a href="ConductR.html">ConductR</a>, to discover what service APIs are offered by this service. The meta data read from here may in turn be used to configure service gateways and other components.</p>
<p>Finally, we need to tell Play about our application loader. We can do that by adding the following configuration to <code>application.conf</code>:</p>
<pre class="prettyprint"><code>play.application.loader = com.example.HelloLoader
</code></pre><h2 id="Working-with-streams"><a class="section-marker" href="#Working-with-streams">§</a>Working with streams</h2>
<p>When the request and response bodies are strict, working with them is straightforward. If they are streamed, however, you&rsquo;ll need to use Akka streams to work with them. Let&rsquo;s take a look at how some of the streamed service calls in the <a href="ServiceDescriptors.html#Streamed-messages">service descriptors</a> examples might be implemented.</p>
<p>The <code>tick</code> service call is going to return a <code>Source</code> that sends messages at the specified interval. Akka streams has a helpful constructor for such a stream:</p>
<pre class="prettyprint"><code class="language-scala">import scala.concurrent.duration._
import akka.stream.scaladsl.Source

override def tick(intervalMs: Int) = ServiceCall { tickMessage =&gt;
  Future.successful(Source.tick(
    intervalMs.milliseconds, intervalMs.milliseconds, tickMessage
  ).mapMaterializedValue(_ =&gt; NotUsed))
}</code></pre>
<p>The first two arguments are the delay before messages should be sent, and the interval at which they should be sent. The third argument is the message that should be sent on each tick. Calling this service call with an interval of <code>1000</code> and a request message of <code>tick</code> will result in a stream being returned that sent a <code>tick</code> message every second.</p>
<p>A streamed <code>sayHello</code> service call can be implemented by mapping the incoming <code>Source</code> of the names to say hello:</p>
<pre class="prettyprint"><code class="language-scala">override def sayHello = ServiceCall { names =&gt;
  Future.successful(names.map(name =&gt; s&quot;Hello $name!&quot;))
}</code></pre>
<p>When you <code>map</code> a <code>Source</code>, you get back a new <code>Source</code> that applies the map transformation to each message that the incoming <code>Source</code> produces.</p>
<p>These examples of working with streams are obviously quite trivial. The sections on <a href="PubSub.html">Publish-Subscribe</a> and <a href="ReadSide.html">Persistent Read-Side</a> show real examples of using streams in Lagom.</p><h2 id="Handling-headers"><a class="section-marker" href="#Handling-headers">§</a>Handling headers</h2>
<p>Sometimes you may need to handle the request header, or add information to the response header. <code>ServiceCall</code> provides <code>handleRequestHeader</code> and <code>handleResponseHeader</code> methods to allow you to do this, however it is not recommended that you implement these directly, rather, you should use <a href="api/com/lightbend/lagom/scaladsl/server/ServerServiceCall.html"><code>ServerServiceCall</code></a>.</p>
<p><code>ServerServiceCall</code> is an interface that extends <code>ServiceCall</code>, and provides an additional method, <code>invokeWithHeaders</code>. This is different from the regular <code>invoke</code> method because in addition to the <code>Request</code> parameter, it also accepts a <a href="api/com/lightbend/lagom/scaladsl/api/transport/RequestHeader.html"><code>RequestHeader</code></a> parameter. And rather than returning a <code>Future[Response]</code>, it returns a <code>Future[(ResponseHeader, Response)]</code>. Hence it allows you to handle the request header, and send a custom response header. <code>ServerServiceCall</code> implements the <code>handleRequestHeader</code> and <code>handleResponseHeader</code> methods, so that when Lagom calls the <code>invoke</code> method, it is delegated to the <code>invokeWithHeaders</code> method.</p>
<p>The <a href="api/com/lightbend/lagom/scaladsl/server/ServerServiceCall$.html"><code>ServerServiceCall</code></a> companion object provides a factory method for creating <code>ServerServiceCall</code>&rsquo;s that work with both request and response headers. It may seem counter intuitive to be able to create a <code>ServerServiceCall</code> that doesn&rsquo;t work with headers, but the reason for doing this is to assist in service call composition, where a composing service call might want to compose both types of service call.</p>
<p>Here&rsquo;s an example of working with the headers:</p>
<pre class="prettyprint"><code class="language-scala">import com.lightbend.lagom.scaladsl.server.ServerServiceCall
import com.lightbend.lagom.scaladsl.api.transport.ResponseHeader

override def sayHello = ServerServiceCall { (requestHeader, name) =&gt;
  val user = requestHeader.principal
    .map(_.getName).getOrElse(&quot;No one&quot;)
  val response = s&quot;$user wants to say hello to $name&quot;

  val responseHeader = ResponseHeader.Ok
    .withHeader(&quot;Server&quot;, &quot;Hello service&quot;)

  Future.successful((responseHeader, response))
}</code></pre><h2 id="Service-call-composition"><a class="section-marker" href="#Service-call-composition">§</a>Service call composition</h2>
<p>You may have situations where you want to compose service calls with cross cutting concerns such as security or logging. In Lagom, this is done by composing service calls explicitly. The following shows a simple logging service call:</p>
<pre class="prettyprint"><code class="language-scala">def logged[Request, Response](serviceCall: ServerServiceCall[Request, Response]) =
  ServerServiceCall.compose { requestHeader =&gt;
    println(s&quot;Received ${requestHeader.method} ${requestHeader.uri}&quot;)
    serviceCall
  }</code></pre>
<p>This uses the <code>compose</code> method from <code>ServerServiceCall</code>, which takes a callback that takes the request header, and returns a service call.</p>
<p>If we were to implement the <code>HelloService</code> to be logged, we would use it like this:</p>
<pre class="prettyprint"><code class="language-scala">override def sayHello = logged(ServerServiceCall { name =&gt;
  Future.successful(s&quot;Hello $name!&quot;)
})</code></pre>
<p>Another common cross cutting concern is authentication. Imagine you have a user storage interface:</p>
<pre class="prettyprint"><code class="language-scala">trait UserStorage {
  def lookupUser(username: String): Future[Option[User]]
}</code></pre>
<p>You could use it like this to implement an authenticated service call:</p>
<pre class="prettyprint"><code class="language-scala">import com.lightbend.lagom.scaladsl.api.transport.Forbidden

def authenticated[Request, Response](
  serviceCall: User =&gt; ServerServiceCall[Request, Response]
) = ServerServiceCall.composeAsync { requestHeader =&gt;

  // First lookup user
  val userLookup = requestHeader.principal
    .map(principal =&gt; userStorage.lookupUser(principal.getName))
    .getOrElse(Future.successful(None))

  // Then, if it exists, apply it to the service call
  userLookup.map {
    case Some(user) =&gt; serviceCall(user)
    case None =&gt; throw Forbidden(&quot;User must be authenticated to access this service call&quot;)
  }
}</code></pre>
<p>This time, since the lookup of the user is asynchronous, we&rsquo;re using <code>composeAsync</code>, which allows us to asynchronously return the service call to handle the service. Also, instead of simply accepting a service call, we accept a function of a user to a service call. This means the service call can access the user:</p>
<pre class="prettyprint"><code class="language-scala">override def sayHello = authenticated { user =&gt;
  ServerServiceCall { name =&gt;
    Future.successful(s&quot;$user is saying hello to $name&quot;)
  }
}</code></pre>
<p>Notice here, in contrast to other frameworks where a user object may be passed using thread locals or in an untyped map by filters, the user object is explicitly passed. If your code requires access to the user object, it&rsquo;s impossible to have a configuration error where you forgot to put the filter in place, the code simply will not compile.</p>
<p>Often you will want to compose multiple service calls together. This is where the power of function based composition really shines, in contrast to annotations. Since service calls are just regular methods, you can simply define a new method that combines them, like so:</p>
<pre class="prettyprint"><code class="language-scala">def filter[Request, Response](
  serviceCall: User =&gt; ServerServiceCall[Request, Response]
) = logged(authenticated(serviceCall))</code></pre>
<p>Using this in the hello service:</p>
<pre class="prettyprint"><code class="language-scala">override def sayHello = filter { user =&gt;
  ServerServiceCall { name =&gt;
    Future.successful(s&quot;$user is saying hello to $name&quot;)
  }
}</code></pre>
                </article>

                
                    
                        
                            <nav class="next-link">
                                <a href="ServiceInfo.html"><strong>Next: </strong> Service Metadata</a>
                            </nav>
                        
                    
                

                
                    <p class="edit-source">Found an error in this documentation? The source code for this page can be found
                        <a href="https://github.com/lagom/lagom/edit/1.3.x/docs/manual/scala/guide/services/ServiceImplementation.md">here</a>. Please feel free to edit and contribute a pull request.</p>
                
            </div>
            <aside class="small-12 large-4 columns">
                <nav class="side-menu">

                    <input type="text" id="docs-search" placeholder="Search"/>

                    <label for="docs-version">Version:</label>
                    <select id="docs-version">
                    
                        <option value="/documentation/1.3.x/scala/ServiceImplementation.html" selected="selected">1.3.x</option>
                    
                    </select>

                    <a href="/documentation/1.3.x/scala/api/index.html" class="api-docs">API Documentation</a>

                    
                        <h3>Writing Lagom services</h3>
                        <ul>
                        
                            
                                <li><a href="ServiceDescriptors.html">Service descriptors</a></li>
                            
                        
                            
                                <li class="current-page"><a href="ServiceImplementation.html">Implementing services</a></li>
                            
                        
                            
                                <li><a href="ServiceInfo.html">Service Metadata</a></li>
                            
                        
                            
                                <li><a href="ServiceClients.html">Consuming services</a></li>
                            
                        
                            
                                <li><a href="TestingServices.html">Testing Services</a></li>
                            
                        
                            
                                <li><a href="MessageSerializers.html">Message serializers</a></li>
                            
                        
                            
                                <li><a href="HeaderFilters.html">Header Filters</a></li>
                            
                        
                            
                                <li><a href="ServiceErrorHandling.html">Error handling</a></li>
                            
                        
                        </ul>
                    
                        <h3>Lagom reference guide</h3>
                        <ul>
                        
                            
                                <li><a href="ReferenceGuide.html">Reference Guide</a></li>
                            
                        
                            
                                <li><a href="LagomBuild.html">Defining a Lagom build</a></li>
                            
                        
                            
                                <li><a href="DevEnvironment.html">Running Lagom in development</a></li>
                            
                        
                            
                                <li class="current-page"><a href="ServiceDescriptors.html">Writing Lagom services</a></li>
                            
                        
                            
                                <li><a href="PersistentEntity.html">Writing persistent and clustered services</a></li>
                            
                        
                            
                                <li><a href="MessageBroker.html">Decouple services with a message broker</a></li>
                            
                        
                            
                                <li><a href="ProductionOverview.html">Running Lagom in production</a></li>
                            
                        
                            
                                <li><a href="Logging.html">Logging</a></li>
                            
                        
                            
                                <li><a href="Akka.html">Advanced topics</a></li>
                            
                        
                        </ul>
                    
                        <h3>Scala Home</h3>
                        <ul>
                        
                            
                                <li><a href="Home.html">Home</a></li>
                            
                        
                            
                                <li><a href="WhatIsLagom.html">Welcome to Lagom</a></li>
                            
                        
                            
                                <li><a href="Installation.html">Getting started with Lagom</a></li>
                            
                        
                            
                                <li><a href="CoreConcepts.html">Lagom core concepts</a></li>
                            
                        
                            
                                <li class="current-page"><a href="ReferenceGuide.html">Lagom reference guide</a></li>
                            
                        
                            
                                <li><a href="JVMMemoryOnDev.html">Appendix</a></li>
                            
                        
                            
                                <li><a href="Migration13.html">Lagom releases</a></li>
                            
                        
                        </ul>
                    
                </nav>
            </aside>
        </div>
   </div>


                    <footer>
                        <section class="fw-wrapper lb-grey-dkr support">
                            <div class="row">
                                <div class="small-12 medium-6 columns">
                                    <svg class="svg-icon svg-icon-chat" version="1.1" id="Chat" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve">
<path fill="#ffffff" d="M5.8,12.2V6H2C0.9,6,0,6.9,0,8v6c0,1.1,0.9,2,2,2h1v3l3-3h5c1.1,0,2-0.9,2-2v-1.82c-0.064,0.014-0.132,0.021-0.2,0.021h-7
	V12.2z M18,1H9C7.9,1,7,1.9,7,3v8h7l3,3v-3h1c1.1,0,2-0.899,2-2V3C20,1.9,19.1,1,18,1z"/>
</svg>

                                    <h3>Community support</h3>
                                    <ul>
                                        <li><a href="//groups.google.com/forum/#!forum/lagom-framework">Mailing list</a></li>
                                        <li><a href="//stackoverflow.com/questions/tagged/lagom">Stackoverflow</a></li>
                                    </ul>
                                </div>
                                <div class="small-12 medium-6 columns">
                                    <svg class="svg-icon svg-icon-lb-icon-reverse" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 302 262">
    <title>lightbend-icon</title>
    <path  fill="#ffffff" d="M1,195v56a10,10,0,0,0,10,10H291a10,10,0,0,0,10-10V195a557.85,557.85,0,0,1-150,20A557.85,557.85,0,0,1,1,195Z" />
    <path  fill="#ffffff" d="M291,1H11A10,10,0,0,0,1,11V176a539.94,539.94,0,0,0,150,21,539.94,539.94,0,0,0,150-21V11A10,10,0,0,0,291,1Z" />
</svg>

                                    <h3>Professional support</h3>
                                    <ul>
                                        <li><a href="//www.lightbend.com/services/expert-support">Lightbend Subscription</a></li>
                                        <li><a href="//www.lightbend.com/services/training">Training</a></li>
                                        <li><a href="//www.lightbend.com/services/consulting">Consulting</a></li>
                                    </ul>
                                </div>
                            </div>
                        </section>

                        <section class="fw-wrapper lb-grey links">
                            <div class="row">
                                <div class="small-12 medium-6 large-3 columns">
                                    <h3>Lagom</h3>
                                    <ul class="no-bullet">
                                        <li><a href="/download.html">Download</a></li>
                                        <li><a href="/blog">Blog</a></li>
                                        <li><a href="/documentation/">Documentation</a></li>
                                    </ul>
                                </div>
                                <div class="small-12 medium-6 large-3 columns">
                                    <h3>Community links</h3>
                                    <ul>
                                        <li><a href="//www.eventbrite.com/directory/?q=lagom&amp;loc=Worldwide">Events <em>via Eventbrite</em></a></li>
                                        <li><a href="http://www.indeed.com/jobs?q=%22lagom%22&amp;l=">Jobs <em>via Indeed</em></a></li>
                                        <li><a href="http://www.scoop.it/lagom">Blogs <em>via Scoop.it</em></a></li>
                                    </ul>
                                </div>
                                <div class="small-12 medium-6 large-3 columns">
                                    <h3>Code &amp; contribution</h3>
                                    <ul>
                                        <li><a href="//github.com/lagom/lagom/issues">Bug tracker <em>GitHub</em></a></li>
                                        <li><a href="/get-involved.html">Get involved</a></li>
                                    </ul>
                                </div>
                                <div class="small-12 medium-6 large-3 columns">
                                    <h3>Social networks</h3>
                                    <ul>
                                        <li><a href="//twitter.com/lagom"><span>Twitter</span></a></li>
                                    </ul>
                                </div>
                            </div>
                        </section>

                        <section class="fw-wrapper lgm-purple-dkr credits">
                            <div class="row">
                                <div class="small-12 medium-3 columns">
                                    <a href="/" class="logo"><img src="/images/logos/lagom-reverse.svg"></a>
                                </div>
                                <div class="small-12 medium-3 columns">
                                    <a href="//lightbend.com" class="partner"><img src="/images/logos/lightbend-reverse.svg"></a>
                                </div>
                                <div class="small-12 medium-6 columns">
                                    <p>Lagom is released under the Apache 2 License</p>
                                </div>
                            </div>
                        </section>

                    </footer>

                </div>
            </div>
        </div>
    </body>
    <script src="/28567f17f7db00430eb0f3f4380c7c53e10abdde-all-scripts-concat.js"></script>

    <script>
  		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  		ga('create', 'UA-84991267-1', 'auto');
  		ga('send', 'pageview');
	</script>
     
    <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
    <script type="text/javascript"> docsearch({
        apiKey: "77ef1e29e6bddfca861f7a42cc51725e",
        indexName: "lagomframework",
        inputSelector: "#docs-search",
        algoliaOptions: {
            facetFilters: '["version:1.3.x"]'
        }
    });
    </script>
    

</html>

